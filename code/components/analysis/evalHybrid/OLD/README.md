This code re-calculates a number of metrics.
In order to not, the newly written code just re-uses old metric values.
